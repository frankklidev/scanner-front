{"ast":null,"code":"var _jsxFileName = \"/Users/franklin/Downloads/store-main 2/src/modules/sales/components/FormSale.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport * as Yup from \"yup\";\nimport { Card } from \"../../app/components/Card\";\nimport { useFormik } from \"formik\";\nimport { Button } from \"../../app/components/Button\";\nimport { Input } from \"../../app/components/Input\";\nimport { Loading } from \"../../app/components/Loading\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { salesSelector, createSale, getSaleById } from \"../redux/index\";\nimport { useSelector } from \"react-redux\";\nimport { useAppDispatch } from \"../../app/store\";\nimport { showMessage } from \"../../shared/redux/message\";\nimport { Dropdown } from \"primereact/dropdown\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SignupSchema = Yup.object().shape({\n  code_product: Yup.string().required(\"Required field\"),\n  count_product: Yup.number().min(1).required(\"Required field\"),\n  type_of_sale: Yup.number().required(\"Required field\")\n});\nexport const FormSale = () => {\n  _s();\n  var _formik$values;\n  const disptach = useAppDispatch();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const {\n    saleId\n  } = useParams();\n  const [sale, setSale] = useState(undefined);\n  const {\n    loadingSales\n  } = useSelector(salesSelector);\n  const [selectedCity, setSelectedCity] = useState(null);\n  const cities = [{\n    name: 'Transferencia',\n    code: 'TF'\n  }, {\n    name: 'Cash',\n    code: 'Ch'\n  }];\n  useEffect(() => {\n    if (saleId) disptach(getSaleById(saleId)).unwrap().then(sale => {\n      setSale(sale);\n    }).catch(error => {\n      disptach(showMessage({\n        severity: \"error\",\n        summary: error.response.data.message\n      }));\n    });\n  }, [saleId]);\n  const formik = useFormik({\n    initialValues: {\n      code_product: (sale === null || sale === void 0 ? void 0 : sale.code_product) || \"\",\n      count_product: (sale === null || sale === void 0 ? void 0 : sale.count_product) || 1,\n      type_of_sale: (sale === null || sale === void 0 ? void 0 : sale.type_of_sale) || \"\"\n    },\n    onSubmit: values => {\n      console.log(values);\n    },\n    validationSchema: SignupSchema\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pt-3\",\n    children: [/*#__PURE__*/_jsxDEV(Loading, {\n      show: loadingSales\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        style: \"mx-3 shadow-3\",\n        title: location.pathname.split(\"/\").at(-1) === \"edit\" ? \"Update sale\" : \"Create sale\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid flex-row\",\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            style: \"col-4\",\n            required: true,\n            value: formik.values.code_product,\n            name: \"code_product\",\n            label: \"Code\",\n            icon: \"pi pi-info-circle\",\n            onChange: formik.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            type: \"number\",\n            style: \"col-4\",\n            required: true,\n            value: (_formik$values = formik.values) === null || _formik$values === void 0 ? void 0 : _formik$values.count_product,\n            name: \"count_product\",\n            label: \"Count\",\n            icon: \"pi pi-info-circle\",\n            onChange: formik.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n            value: selectedCity,\n            onChange: e => setSelectedCity(e.value),\n            options: cities,\n            optionLabel: \"name\",\n            placeholder: \"Select a City\",\n            className: \"w-full md:w-14rem\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid flex-row mt-3 mr-3 justify-content-end\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"button\",\n          style: \"mr-3\",\n          label: \"Finalizar\",\n          icon: \"pi pi-check\",\n          onClick: () => navigate(-1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button\n        // onClick={() => console.log(formik.values)}\n        , {\n          onClick: () => disptach(createSale(formik.values)),\n          disabled: !formik.isValid || !formik.dirty,\n          type: \"button\",\n          label: \"Guardar\",\n          icon: \"pi pi-save\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(FormSale, \"TYiLilaIuDtpxkgqYyodm6jKcAM=\", false, function () {\n  return [useAppDispatch, useLocation, useNavigate, useParams, useSelector, useFormik];\n});\n_c = FormSale;\nvar _c;\n$RefreshReg$(_c, \"FormSale\");","map":{"version":3,"names":["useState","useEffect","Yup","Card","useFormik","Button","Input","Loading","useLocation","useNavigate","useParams","salesSelector","createSale","getSaleById","useSelector","useAppDispatch","showMessage","Dropdown","SignupSchema","object","shape","code_product","string","required","count_product","number","min","type_of_sale","FormSale","disptach","location","navigate","saleId","sale","setSale","undefined","loadingSales","selectedCity","setSelectedCity","cities","name","code","unwrap","then","catch","error","severity","summary","response","data","message","formik","initialValues","onSubmit","values","console","log","validationSchema","pathname","split","at","handleChange","e","value","isValid","dirty"],"sources":["/Users/franklin/Downloads/store-main 2/src/modules/sales/components/FormSale.tsx"],"sourcesContent":["import { FC, ReactElement, useState, useEffect } from \"react\";\n\nimport * as Yup from \"yup\";\n\nimport { Card } from \"../../app/components/Card\";\nimport { useFormik } from \"formik\";\nimport { Button } from \"../../app/components/Button\";\nimport { Input } from \"../../app/components/Input\";\nimport { Loading } from \"../../app/components/Loading\";\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\nimport { salesSelector, createSale, getSaleById } from \"../redux/index\";\nimport { useSelector } from \"react-redux\";\nimport { useAppDispatch } from \"../../app/store\";\nimport { ISale } from \"../types/index\";\nimport { showMessage } from \"../../shared/redux/message\";\nimport { Dropdown } from \"primereact/dropdown\";\n\nconst SignupSchema = Yup.object().shape({\n  code_product: Yup.string().required(\"Required field\"),\n  count_product: Yup.number().min(1).required(\"Required field\"),\n  type_of_sale: Yup.number().required(\"Required field\"),\n});\n\nexport const FormSale: FC = (): ReactElement => {\n  const disptach = useAppDispatch();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { saleId } = useParams();\n  const [sale, setSale] = useState<ISale | undefined>(undefined);\n\n  const { loadingSales } = useSelector(salesSelector);\n  const [selectedCity, setSelectedCity] = useState(null);\n  const cities = [\n      { name: 'Transferencia', code: 'TF' },\n      { name: 'Cash', code: 'Ch' }\n  ];\n\n  useEffect(() => {\n    if (saleId)\n      disptach(getSaleById(saleId))\n        .unwrap()\n        .then((sale) => {\n          setSale(sale);\n        })\n        .catch((error) => {\n          disptach(\n            showMessage({\n              severity: \"error\",\n              summary: error.response.data.message,\n            })\n          );\n        });\n  }, [saleId]);\n\n  const formik = useFormik<ISale>({\n    initialValues: {\n      code_product: sale?.code_product || \"\",\n      count_product: sale?.count_product || 1,\n      type_of_sale: sale?.type_of_sale || \"\",\n    },\n    onSubmit: (values) => {\n      console.log(values);\n    },\n    validationSchema: SignupSchema,\n  });\n\n  return (\n    <div className=\"pt-3\">\n      <Loading show={loadingSales} />\n      <form>\n        <Card\n          style={\"mx-3 shadow-3\"}\n          title={\n            location.pathname.split(\"/\").at(-1) === \"edit\"\n              ? \"Update sale\"\n              : \"Create sale\"\n          }\n        >\n          <div className={\"grid flex-row\"}>\n            <Input\n              style=\"col-4\"\n              required\n              value={formik.values.code_product}\n              name={\"code_product\"}\n              label={\"Code\"}\n              icon={\"pi pi-info-circle\"}\n              onChange={formik.handleChange}\n            />\n            <Input\n              type=\"number\"\n              style=\"col-4\"\n              required\n              value={formik.values?.count_product}\n              name={\"count_product\"}\n              label={\"Count\"}\n              icon={\"pi pi-info-circle\"}\n              onChange={formik.handleChange}\n            />\n            {/* <Input\n              type=\"text\"\n              style=\"col-4\"\n              required\n              value={formik.values.type_of_sale}\n              name={\"type_of_sale\"}\n              label={\"Sale type\"}\n              icon={\"pi pi-info-circle\"}\n              onChange={formik.handleChange}\n            /> */}\n          <Dropdown value={selectedCity} onChange={(e) => setSelectedCity(e.value)} options={cities} optionLabel=\"name\" \n                placeholder=\"Select a City\" className=\"w-full md:w-14rem\" />\n            \n          </div>\n        </Card>\n        <div className={\"grid flex-row mt-3 mr-3 justify-content-end\"}>\n          <Button\n            type=\"button\"\n            style={\"mr-3\"}\n            label=\"Finalizar\"\n            icon={\"pi pi-check\"}\n            onClick={() => navigate(-1)}\n          />\n          <Button\n            // onClick={() => console.log(formik.values)}\n            onClick={() => disptach(createSale(formik.values))}\n            disabled={!formik.isValid || !formik.dirty}\n            type=\"button\"\n            label=\"Guardar\"\n            icon={\"pi pi-save\"}\n          />\n        </div>\n      </form>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}